<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="echarts.min.js"></script>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 1000px;height:400px;"></div>
    <script type="text/javascript">
        const initData =[
            {
                "time":"2021-01-15 10:46:51",
                "name":'1.txt',
                "command":"mysqld",
                "value":[
                    {"pid":00000,"cpu":13.17,"mem":71.00},
                    {"pid":1392,"cpu":20.0,"mem":11.5},
                    {"pid":24454,"cpu":20.0,"mem":5.7},
                    {"pid":20355,"cpu":0.0,"mem":0.0},
                    {"pid":20409,"cpu":0.0,"mem":0.0},
                    {"pid":20411,"cpu":20.0,"mem":0.0},
                    {"pid":26932,"cpu":0.0,"mem":1.9}
                ]
            },
            {
                "time":"2021-01-15 10:46:51",
                "name":'1.txt',
                "command":"mysqld",
                "value":[
                    {"pid":00000,"cpu":10.18,"mem":71.00},
                    {"pid":1392,"cpu":20.0,"mem":11.5},
                    {"pid":24454,"cpu":20.0,"mem":5.7},
                    {"pid":20355,"cpu":0.0,"mem":0.0},
                    {"pid":20409,"cpu":0.0,"mem":0.0},
                    {"pid":20411,"cpu":20.0,"mem":0.0},
                    {"pid":26932,"cpu":0.0,"mem":1.9}
                ]
            },
            {
                "time":"2021-01-15 10:46:51",
                "name":'2.txt',
                "command":"mysqld",
                "value":[
                    {"pid":00000,"cpu":10.0,"mem":71.00},
                    {"pid":1392,"cpu":20.0,"mem":11.5},
                    {"pid":24454,"cpu":20.0,"mem":5.7},
                    {"pid":20355,"cpu":0.0,"mem":0.0},
                    {"pid":20409,"cpu":0.0,"mem":0.0},
                    {"pid":20411,"cpu":20.0,"mem":0.0},
                    {"pid":26932,"cpu":0.0,"mem":1.9}
                ]
            },
            {
                "time":"2021-01-15 10:46:59",
                "name":'2.txt',
                "command":"mysqld",
                "value":[
                    {"pid":00000,"cpu":15.17,"mem":71.00},
                    {"pid":1392,"cpu":20.0,"mem":11.5},
                    {"pid":24454,"cpu":20.0,"mem":5.7},
                    {"pid":20355,"cpu":0.0,"mem":0.0},
                    {"pid":20409,"cpu":0.0,"mem":0.0},
                    {"pid":20411,"cpu":20.0,"mem":0.0},
                    {"pid":26932,"cpu":0.0,"mem":1.9}
                ]
            },
            {
                "time":"2021-01-15 10:46:51",
                "name":'3.txt',
                "command":"mysqld",
                "value":[
                    {"pid":00000,"cpu":2.0,"mem":71.00},
                    {"pid":1392,"cpu":20.0,"mem":11.5},
                    {"pid":24454,"cpu":20.0,"mem":5.7},
                    {"pid":20355,"cpu":0.0,"mem":0.0},
                    {"pid":20409,"cpu":0.0,"mem":0.0},
                    {"pid":20411,"cpu":20.0,"mem":0.0},
                    {"pid":26932,"cpu":0.0,"mem":1.9}
                ]
            },
            {
                "time":"2021-01-15 10:46:59",
                "name":'3.txt',
                "command":"mysqld",
                "value":[
                    {"pid":00000,"cpu":5.17,"mem":71.00},
                    {"pid":1392,"cpu":20.0,"mem":11.5},
                    {"pid":24454,"cpu":20.0,"mem":5.7},
                    {"pid":20355,"cpu":0.0,"mem":0.0},
                    {"pid":20409,"cpu":0.0,"mem":0.0},
                    {"pid":20411,"cpu":20.0,"mem":0.0},
                    {"pid":26932,"cpu":0.0,"mem":1.9}
                ]
            },
            {
                "time":"2021-01-15 10:46:51",
                "name":'4.txt',
                "command":"mysqld",
                "value":[
                    {"pid":00000,"cpu":1.0,"mem":71.00},
                    {"pid":1392,"cpu":20.0,"mem":11.5},
                    {"pid":24454,"cpu":20.0,"mem":5.7},
                    {"pid":20355,"cpu":0.0,"mem":0.0},
                    {"pid":20409,"cpu":0.0,"mem":0.0},
                    {"pid":20411,"cpu":20.0,"mem":0.0},
                    {"pid":26932,"cpu":0.0,"mem":1.9}
                ]
            },
            {
                "time":"2021-01-15 10:46:59",
                "name":'4.txt',
                "command":"mysqld",
                "value":[
                    {"pid":00000,"cpu":1.17,"mem":71.00},
                    {"pid":1392,"cpu":20.0,"mem":11.5},
                    {"pid":24454,"cpu":20.0,"mem":5.7},
                    {"pid":20355,"cpu":0.0,"mem":0.0},
                    {"pid":20409,"cpu":0.0,"mem":0.0},
                    {"pid":20411,"cpu":20.0,"mem":0.0},
                    {"pid":26932,"cpu":0.0,"mem":1.9}
                ]
            },
            {
                "time":"2021-01-18 10:46:51",
                "name":'5.txt',
                "command":"mysqld",
                "value":[
                    {"pid":00000,"cpu":9.0,"mem":71.00},
                    {"pid":1392,"cpu":20.0,"mem":11.5},
                    {"pid":24454,"cpu":20.0,"mem":5.7},
                    {"pid":20355,"cpu":0.0,"mem":0.0},
                    {"pid":20409,"cpu":0.0,"mem":0.0},
                    {"pid":20411,"cpu":20.0,"mem":0.0},
                    {"pid":26932,"cpu":0.0,"mem":1.9}
                ]
            },
            {
                "time":"2021-01-19 10:30:59",
                "name":'5.txt',
                "command":"mysqld",
                "value":[
                    {"pid":00000,"cpu":12.17,"mem":71.00},
                    {"pid":1392,"cpu":20.0,"mem":11.5},
                    {"pid":24454,"cpu":20.0,"mem":5.7},
                    {"pid":20355,"cpu":0.0,"mem":0.0},
                    {"pid":20409,"cpu":0.0,"mem":0.0},
                    {"pid":20411,"cpu":20.0,"mem":0.0},
                    {"pid":26932,"cpu":0.0,"mem":1.9}
                ]
            },
        ]     

        let xAxisData = []

        const arr1 = []
        const arr2 = []
        const arr3 = []
        const arr4 = []
        const arr5 = []

        const handleData = (item,arr)=>{
            xAxisData.push(item.time)
            item.value.forEach(v => {
                if(v.pid === 00000){
                    arr.push(v.cpu)
                }
            })
        }

        initData.forEach(item => {
            switch(item.name){
                case '1.txt': 
                    handleData(item,arr1)
                    break
                case '2.txt': 
                    handleData(item,arr2)
                    break
                case '3.txt': 
                    handleData(item,arr3)
                    break
                case '4.txt': 
                    handleData(item,arr4)
                    break
                case '5.txt': 
                    handleData(item,arr5)
                    break
                default: 
                break
            }
        })

        const resultData =[
            {
                name:'1.txt',
                type: 'line',
                data:arr1,
            },
            {
                name:'2.txt',
                type: 'line',
                data:arr2,
            },
            {
                name:'3.txt',
                type: 'line',
                data:arr3,
            },
            {
                name:'4.txt',
                type: 'line',
                data:arr4,
            },
            {
                name:'5.txt',
                type: 'line',
                data:arr5,
            },
        ]

        console.log(xAxisData,resultData)
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));

        // 指定图表的配置项和数据
        var option = {
            xAxis: {
                type: 'category',
                data: Array.from(new Set(xAxisData))
            },
            legend: {
                data: resultData.map(item =>item.name)
            },
            yAxis: {
                type: 'value'
            },
            series: resultData
        };


        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    </script>
</body>
</html>